\begingroup \toks 0={macro:-> \coordinate (dS) at (1.5,0.5); \fill [name path=teleso,ball color=gray!10!brown,opacity=0.50,line width=1,draw=black] plot [smooth cycle] coordinates { (0,0) (1,-1) (3,0) (2.5,2) (3,3) (3,4) (2,5) (-1,3) }; \draw (3,4) node[right]{$S_a$}; \draw (0,0) node[below, left=1mm]{$S_b$}; \shade [bottom color=gray!10!brown,opacity=0.50, shading angle=60] (dS) rectangle +(0.5,0.5); \node [below] at (dS) {$dS$}; \draw [->] (dS) ++ (0.25,0.25) -- +(30:0.5) node[right]{$\vec {n}$}; \draw [->] (dS) ++ (0.25,0.25) -- +(60:0.7) node[right]{$\vec {C}$}; \draw [fill=black] (2,4) circle (0.05) node[above, black]{$V_1$}; \draw [fill=black] (1,0.5) circle (0.05) node[above, black]{$V_2$}; \path [name path=line1](-1.5,3) -- (3,2); \path [name intersections={of=teleso and line1, name=cross}]; \coordinate (A) at (cross-1); \coordinate (B) at (cross-2); \fill [color=cyan, opacity=0.25] let \p 1=(A),\p 2=(B), \n 1={atan2(\y 2-\y 1,\x 2-\x 1)},\n 2={veclen(\y 2-\y 1,\x 2-\x 1)} in [rotate=\n 1] ($ (A)!0.5!(B) $) ellipse (\n 2/2 and 0.7cm); \draw [->, thick] let \p 1=(A),\p 2=(B), \n 1= {atan2(\y 2-\y 1,\x 2-\x 1)} in ($ (A)!0.5!(B) $) -- +(90+\n 1:1) node[right]{$\vec {n}_1$}; \draw [->, dashed, thick] let \p 1=(A),\p 2=(B), \n 1= {atan2(\y 2-\y 1,\x 2-\x 1)} in ($ (A)!0.5!(B) $) -- +(-90+\n 1:1) node[right]{$\vec {n}_2$}; \par \draw [very thick,cyan] let \p 1=(A), \p 2=(B), \n 1={atan2(\y 2-\y 1,\x 2-\x 1)}, \n 2={veclen(\y 2-\y 1,\x 2-\x 1)} in [rotate=\n 1] ($ (A)!0.5!(B)+(0:\n 2/2)$) arc[start angle=0, delta angle=180, x radius=\n 2/2, y radius=0.7cm]; \par \draw [very thick,dashed,cyan] let \p 1=(A), \p 2=(B), \n 1={atan2(\y 2-\y 1,\x 2-\x 1)}, \n 2={veclen(\y 2-\y 1,\x 2-\x 1)} in [rotate=\n 1] ($ (A)!0.5!(B)+(180:\n 2/2)$) arc[start angle=180, delta angle=180, x radius=\n 2/2, y radius=0.7cm]; \par \draw (2,2.5) node[black] {$S_{ab}$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
